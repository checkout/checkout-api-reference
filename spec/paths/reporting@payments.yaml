post:
  tags:
    - Reporting
  summary: Retrieve JSON payments report
  description: |
    Retrieves a payment report containing all payments within your specified parameters.
    You can reconcile the data from this report against your statements (which can be found in the Hub), the list of payments in the Hub (using the `Reference` field) or your own systems.
    *Note:* payments from before February 7th, 2019 at 00.00.00 UTC will appear when using the payments endpoint. To view payments from before this time, please contact our support team.

  parameters:
    - in: query
      name: from
      schema:
        type: string
      required: false
      description: Date and time from which to search
    - in: query
      name: to
      schema:
        type: string
      required: false
      description: Date and time until which to search
    - in: query
      name: reference
      schema:
        type: string
      required: false
      description: Reference of the payment to search for
    - in: query
      name: limit
      schema:
        type: integer
      required: false
      description: Number of results to limit your search to
      maximum: 500
      default: 200

  responses:
    '201':
      description: Payment report retrieved successfully
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PaymentReportResponse'
      headers:
        Cko-Request-Id:
          $ref: "#/components/headers/Cko-Request-Id"
        Cko-Version:
          $ref: "#/components/headers/Cko-Version"
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
    '422':
      description: Invalid data was sent
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
    '502':
      description: Bad gateway
